SELECT 학과코드, 학과명, 학년, 분반, 과목코드, 과목명, 학점, 시수, 교수코드, IS_KNAME 교수명, JG_NAME 직급, 수강인원
FROM
(SELECT GG_HGCODE 학과코드, 학과명, GG_HAKNYUN 학년,
	GG_GMCODE 과목코드, TM_BAN 분반, GG_KNAME 과목명, GG_HJUM 학점, 시수, TM_PFCODE 교수코드,
	COUNT(SJ_HAKBUN) 수강인원
	FROM AC1303, AC1401, AC1121, TBL학과,
	(SELECT TM_YEAR, TM_HAKGI, TM_HGCODE, TM_PFCODE, TM_GMCODE, TM_BAN, TM_HAKNYUN, COUNT(*) 시수
		FROM AC1304
		WHERE TM_YEAR = substr(:학년도학기,1,4) AND TM_HAKGI = substr(:학년도학기,5,1)
		GROUP BY TM_YEAR, TM_HAKGI, TM_HGCODE, TM_PFCODE, TM_GMCODE, TM_BAN, TM_HAKNYUN
	)
	WHERE GG_YEAR = substr(:학년도학기,1,4) AND GG_HAKGI = substr(:학년도학기,5,1)
	AND GG_YEAR = SJ_YEAR AND GG_HAKGI = SJ_HAKGI
	AND GG_HGCODE = SJ_GGHGCODE(+) AND GG_GMCODE = SJ_GGGMCODE(+)
	AND GG_HAKNYUN = SJ_GGHAKNYUN(+)
	AND GG_YEAR  = TM_YEAR AND GG_HAKGI = TM_HAKGI AND GG_GMCODE = TM_GMCODE
	AND GG_HGCODE = HG_CODE AND HG_MCODE = 학과코드
	GROUP BY GG_HGCODE, 학과명, GG_HAKNYUN, TM_BAN, GG_KNAME, GG_GMCODE, GG_HJUM, 시수, TM_PFCODE
),
AC22011, AC2105
WHERE 교수코드 = IS_ID(+) AND IS_JIKGUB = JG_JGCODE(+)
ORDER BY 학과명, 학년, 과목코드, 분반